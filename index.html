<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Desapego Crisma Kerigma</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900">
  <div id="root"></div>

  <script type="text/babel">
function App() {
  const [pares, setPares] = React.useState({});
  const [revelados, setRevelados] = React.useState({});
  const [nomeAtual, setNomeAtual] = React.useState("");
  const [sorteado, setSorteado] = React.useState(null);
  const [sorteioPronto, setSorteioPronto] = React.useState(false);

  const nomes = [
    "Andressa Fernandes da Silva",
    "Cris Alberto da Conceição de Lima",
    "Deuzamir José Bezerra",
    "Ellen Rodrigues de Freitas",
    "Emily Vitória Dias Barbosa",
    "Emily Vitória Tomaz de Pontes",
    "Felipe Gomes Macena da Paixão",
    "Gabrielli Rodrigues de Souza",
    "Gerdeson Manoel de Almeida Oliveira",
    "Hevellyn Christinny da Silva Costa",
    "Iago Roberto Guedes da Silva",
    "Igor Dias Gomes",
    "Jessica da Conceição Barbosa",
    "José Eduardo Soares da Silva Lima",
    "José Manoel Venâncio de Pontes",
    "Kauane Júlia Barbosa de Lima",
    "Kaylane Querino dos Santos",
    "Kayo Eduardo Santos de Sousa",
    "Ketly Raphaella Soares Costa",
    "Kevilly Maria",
    "Kelton Mark Araújo Marinho",
    "Leonildo Ferreira dos Santos",
    "Letícia Araújo Linhares",
    "Lívia Maria Firmino da Silva",
    "Luiz Benícius Lucindo da Silva",
    "Mª Clara Ataíde do Nascimento",
    "Maria Clara dos Santos Carvalho",
    "Maria Clara Oliveira de Lima",
    "Maria Eduarda Soares da Silva Lima",
    "Maria Heloíza Pereira da Silva",
    "Mariana Maria de Souza Cândido",
    "Marianni Cavalcanti da Silva",
    "Miguel Araújo Linhares",
    "Mikaelly Rodrigues da Silva",
    "Rafaela Galdino dos Santos",
    "Rafaella Vivian Bernardo dos Santos",
    "Thairis Rodrigues de Oliveira",
    "Thainara Rodrigues de Oliveira",
    "Thais Regina Estevam De Araújo",
    "Wemilly Vitória da Silva Reis"
  ];

  function embaralhar(lista) {
    const a = [...lista];
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function gerarSorteio() {
    let tentativas = 0;
    while (tentativas < 5000) {
      const embaralhado = embaralhar(nomes);
      let valido = true;
      for (let i = 0; i < nomes.length; i++) {
        if (nomes[i] === embaralhado[i]) {
          valido = false;
          break;
        }
      }
      if (valido) {
        const mapa = {};
        nomes.forEach((n, i) => mapa[n] = embaralhado[i]);
        setPares(mapa);
        setRevelados({});
        setSorteado(null);
        setSorteioPronto(true);
        alert("Sorteio gerado com sucesso!");
        return;
      }
      tentativas++;
    }
    alert("Não foi possível gerar um sorteio válido.");
  }

  function removerAcentos(str) {
    return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
  }

  function revelar() {
    const nomeFormatado = removerAcentos(nomeAtual.trim().toLowerCase());

    // Criar mapa normalizado
    const paresNormalizados = {};
    Object.entries(pares).forEach(([k, v]) => {
      paresNormalizados[removerAcentos(k.toLowerCase())] = v;
    });

    if (!paresNormalizados[nomeFormatado]) {
      alert("Nome não encontrado ou sorteio não gerado.");
      return;
    }

    if (revelados[nomeFormatado]) {
      alert("Você já viu o resultado.");
      return;
    }

    setSorteado(paresNormalizados[nomeFormatado]);
    setRevelados(prev => ({ ...prev, [nomeFormatado]: true }));
  }

  return (
    <div className="max-w-md mx-auto p-4 space-y-4">
      <h1 className="text-2xl font-bold text-center">Amigo Oculto</h1>

      <button 
        onClick={gerarSorteio} 
        className="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600 transition"
      >
        Gerar / Refazer sorteio
      </button>

      {sorteioPronto && (
        <div className="bg-yellow-100 p-2 rounded text-center">
          Sorteio pronto! Digite seu nome para revelar.
        </div>
      )}

      <div className="space-y-2">
        <input
          type="text"
          placeholder="Digite seu nome completo"
          value={nomeAtual}
          onChange={e => setNomeAtual(e.target.value)}
          className="w-full border p-2 rounded"
        />
        <button 
          onClick={revelar} 
          className="w-full bg-green-500 text-white py-2 rounded hover:bg-green-600 transition"
        >
          Revelar
        </button>
      </div>

      {sorteado && (
        <div className="bg-green-100 p-4 rounded text-center text-lg font-semibold">
          Você tirou: {sorteado}
          <button 
            onClick={() => setSorteado(null)} 
            className="block mt-2 text-sm text-red-500 hover:underline"
          >
            Esconder
          </button>
        </div>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
